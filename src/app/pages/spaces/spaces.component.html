<div class="search-container" id="search">
  <form class="search-form" [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

    <mat-form-field>
      <input matInput sn-google-address type="text" placeholder="Location" (getAddress)="selectedAddress($event)" formControlName="name">
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" placeholder="Min Price" formControlName="minPrice">
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" placeholder="Max Price" formControlName="maxPrice">
    </mat-form-field>
    <mat-form-field>
      <mat-select placeholder="Space Type" name="category" formControlName="categoryId">
        <mat-option [value]="''">All</mat-option>
        <mat-option *ngFor="let category of categories$ | async" [value]="category.id">
          {{ category.name }} 
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button type="submit" id="submit" >Filter Spaces</button>
  </form>
  <ng-container *ngIf="(isLoading$ | async); else doneLoading">
    <mat-spinner></mat-spinner>
  </ng-container>
  <ng-template #doneLoading>
    <div class="search-results">
      <sn-space-list-item
        *ngFor="let space of results$ | async"
        [space]="space"
        (mouseenter)="toggleHover(space, true)"
        (mouseleave)="toggleHover(space, false)">
      </sn-space-list-item>
  </div>
  
  <!-- For the pagination back and next buttons --> 
  <!-- <mat-spinner *ngIf="results.loading | async"></mat-spinner> -->
  <!-- <div style="width: 40%">
    <button (click)="backPage()">back</button>
    <button (click)="nextPage()" [disabled]="results.done | async">next</button>
  </div> -->
  
  </ng-template>
  <agm-map
    [zoom]="zoom"
    [latitude]="latitude"
    [longitude]="longitude"
    [streetViewControl]="false"
    class="hidden-tablet">
  </agm-map>
</div>
