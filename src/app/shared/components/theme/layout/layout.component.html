<!-- Sidebar -->
<mat-drawer-container class="main-container" fullscreen>

  <mat-drawer class="sidenav" [opened]="showSidenav$ | async" align="end" disableClose>
    <button mat-icon-button (click)="closeSidenav()" class="closeMenu">
        <mat-icon aria-label="Close sidenav icon">arrow_forward</mat-icon>
    </button>

    <ng-container *ngIf="sidenavComponent === 'sign-in'">
        <gen-sign-in></gen-sign-in>
    </ng-container>
    <ng-container *ngIf="sidenavComponent === 'register'">
        <gen-sign-up></gen-sign-up>
    </ng-container>
    <ng-container *ngIf="sidenavComponent === 'forgot-password'">
        <gen-forgot-password></gen-forgot-password>
    </ng-container>

    <!-- <router-outlet name="sidenav"></router-outlet> -->

  </mat-drawer>

  <mat-drawer-content>

    <!-- Nav -->
    <nav id="main-nav">
      <a routerLink="/" class="logo" [ngClass]="logo$ | async"></a>
      <span><!-- fill space --></span>
      <a routerLink="/listing/category" class="hidden-tablet" style="color: white">List your space</a>
      <div *ngIf="isSignedIn$ | async; then authenticated else guest"></div>
    </nav>

    <!-- User NOT logged in -->
    <ng-template #guest>
      <button mat-icon-button [matMenuTriggerFor]="burguerMenu" class="hidden show-tablet">
        <mat-icon aria-label="Menu" style="color: white">menu</mat-icon>
      </button>
      <mat-menu #burguerMenu="matMenu" yPosition="below" xPosition="before" overlapTrigger="false">
        <button mat-menu-item routerLink="/listing/category" style="color: white">List a space</button>
        <button mat-menu-item (click)="openSidenav(); setSidenavLogin();" style="color: white">Log in</button>
        <button mat-menu-item (click)="openSidenav(); setSidenavRegister();" style="color: white">Sign up</button>
      </mat-menu>
      <a href="#" (click)="openSidenav(); setSidenavLogin();" class="hidden-tablet" style="color: white">Log in</a>
      <a href="#" (click)="openSidenav(); setSidenavRegister();" class="hidden-tablet" style="color: white">Sign up</a>
    </ng-template>

    <!-- User logged in -->
    <ng-template #authenticated>
      <button *ngIf="(authUser$ | async) as authUser" mat-icon-button [disableRipple]="true" [matMenuTriggerFor]="menu">
        <div class="image-container">
          <img [src]="authUser.photoURL" class="userProfilePicture">
        </div>
      </button>
      <mat-menu #menu="matMenu" class="dropMenu" yPosition="below" xPosition="before" overlapTrigger="false">
        <button mat-menu-item routerLink="/listing/category">List a space</button>
        <button mat-menu-item routerLink="/users/my-spaces">My spaces</button>
        <button mat-menu-item routerLink="/users/my-profile">Profile</button>
        <button mat-menu-item routerLink="/users/my-favorites">Favorites</button>
        <button mat-menu-item routerLink="/users/my-bookings">Manage Bookings</button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="signOut()">Logout</button>
      </mat-menu>
    </ng-template>

    <router-outlet></router-outlet>

    <!-- Footer -->
    <footer class="grid">
      <div class="inner">
        <img src='assets/images/logo/spacenow-logo.svg' width="200px" class="logo"/>
        <div class="help-pages">
          <ul>
            <li><a routerLink="/pages/about">about</a></li>
            <li><a routerLink="/pages/news">news</a></li>
            <li><a href="#">careers</a></li>
            <li><a href="#">press</a></li>
            <li><a routerLink="/pages/help">help</a></li>
          </ul>
        </div>
        <span class="copyright">Â© spacenow 2017</span>
        <div class="menu">
          <ul fxLayoutAlign="space-between stretch">
            <li><a routerLink="/pages/terms">terms of service</a></li>
            <li><a routerLink="/pages/host-terms">host terms</a></li>
            <li><a routerLink="/pages/privacy">privacy policy</a></li>
            <li><a routerLink="/pages/refund-policy">cancellation policy</a></li>
            <li><a routerLink="/pages/dictionary">Dictionary</a></li>
          </ul>
        </div>
        <ul class="social-media">
          <li><a href="https://www.facebook.com/spacenowaustralia/" class="sm-facebook"></a></li>
          <li><a href="https://www.linkedin.com/company/17945312" class="sm-linkedin"></a></li>
          <li><a href="https://twitter.com/spacenow_aus" class="sm-twitter"></a></li>
        </ul>
      </div>
    </footer>

  </mat-drawer-content>

</mat-drawer-container>
